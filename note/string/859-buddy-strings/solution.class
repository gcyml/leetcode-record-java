class Solution {
    public boolean buddyStrings(String A, String B) {
        if(A.length() != B.length()) {
            return false;
        }
        char[] lettersA = A.toCharArray(), lettersB = B.toCharArray();
        int num = 0;
        int first = 0, second = 0;
        if(A.equals(B)) {
            int[] freq = new int[26]; 
            for(int i=0;i<lettersA.length;i++) {
                freq[lettersA[i] -'a']++;
                if(freq[lettersA[i] -'a'] >= 2) {
                    return true;
                }
            }
        } else {
            for(int i=0;i<lettersA.length;i++) {
                if(lettersA[i] != lettersB[i]) {
                    num++;
                    if(num ==1) {
                        first = i;
                    } else if(num == 2) {
                        second = i;
                    }
                    if(num > 2) {
                        return false;
                    }
                }
            }
        }

        return num == 2 && 
            lettersA[first] == lettersB[second]&&
            lettersA[second] == lettersB[first];
    }
}